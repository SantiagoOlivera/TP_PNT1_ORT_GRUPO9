@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}






<h1>Grupo</h1>
<h4>Modificar</h4>

<form id="grupo" method="POST" action="">

    <div class="form-group">
        <label>Id Grupo</label>
        <input type="text" class="form-control" name="idGrupo" value="@Model.idGrupo" placeholder="idGrupo" readonly>
    </div>

    <div class="form-group">
        <label>Nombre</label>
        <input type="text" class="form-control" name="nombre" value="@Model.nombre" placeholder="Nombre" required>
    </div>

    <div class="form-group">
        <label>Descripción</label>
        <input type="text" class="form-control" name="descripcion" value="@Model.descripcion" placeholder="Descripción" required>
    </div>

    <h1>Jugadores</h1>

    <a href="#" id="btnAgregarJugadores" class="btn btn-lg btn-success" data-toggle="modal" data-target="#jugadoresModal">Agregar</a>
    <br />
    <br />

    <table id="usuarios" class="table table-striped table-bordered" style="width:100%">

        @*@Html.ActionLink("Agregar", "Create", null, null, new { @class = "btn btn-success" } )*@

        <thead>

            <tr>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Email</th>
                <th>Elimnar</th>
            </tr>
        </thead>

        <tbody>

            @foreach (UsuarioGrupo ug in @Model.UsuariosGrupos)
            {
                <tr>
                    <td>@ug.usuario.nombre</td>
                    <td>@ug.usuario.apellido</td>
                    <td>@ug.usuario.email</td>
                    <td>@Html.ActionLink("Eliminar", "Delete", null, null, new { @class = "btn btn-danger" })</td>
                </tr>
            }

        </tbody>


    </table>


    <button type="submit" class="btn btn-primary" onclick="Edit">Modificar</button>

</form>






<!-- large modal -->
<div class="modal fade" id="jugadoresModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Seleccionar usuario</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">


          <div class="container">
              <div class="row">
                  <h2>Specialty select example</h2>
                  <hr />
              </div>

              <div class="row-fluid">
                  Seleccionar jugador:
                  <select id="selectorUsuarios" class="selectpicker" data-show-subtext="false" data-live-search="true" multiple>

                      <option value="">Select</option>


                      <option value='Anaesthesia'>Anaesthesia</option>
                      <option value='Anatomy and Physiology'>Anatomy and Physiology</option>
                      <option value='Cardiology'>Cardiology</option>
                      <option value='Clinical Skills'>Clinical Skills</option>
                      <option value='Critical Care'>Critical Care</option>
                      <option value='Dermatology'>Dermatology</option>
                      <option value='Ear, Nose and Throat'>Ear, Nose and Throat</option>
                      <option value='Emergency Medicine'>Emergency Medicine</option>
                      <option value='Emergency Nursing'>Emergency Nursing</option>
                      <option value='Endocrinology and Diabetes'>Endocrinology and Diabetes</option>
                      <option value='Gastroenterology'>Gastroenterology</option>
                      <option value='General Dentistry'>General Dentistry</option>
                      <option value='General Medicine'>General Medicine</option>
                      <option value='General Practice'>General Practice</option>
                      <option value='Geriatrics'>Geriatrics</option>
                      <option value='Haematology'>Haematology</option>
                      <option value='Immunology'>Immunology</option>
                      <option value='Internal Medicine'>Internal Medicine</option>
                      <option value='Maxillofacial and Plastic Surgery'>Maxillofacial and Plastic Surgery</option>
                      <option value='Microbiology'>Microbiology</option>
                      <option value='Midwifery'>Midwifery</option>
                      <option value='Nephrology'>Nephrology</option>
                      <option value='Neurology'>Neurology</option>
                      <option value='Nursing'>Nursing</option>
                      <option value='Obstetrics and Gynaecology'>Obstetrics and Gynaecology</option>
                      <option value='Occupational Health'>Occupational Health</option>
                      <option value='Oncology'>Oncology</option>
                      <option value='Ophthalmology'>Ophthalmology</option>
                      <option value='Oral Medicine'>Oral Medicine</option>
                      <option value='Orthopaedics'>Orthopaedics</option>
                      <option value='Paediatric Nursing'>Paediatric Nursing</option>
                      <option value='Paediatrics'>Paediatrics</option>
                      <option value='Pain Medicine'>Pain Medicine</option>
                      <option value='Palliative Care'>Palliative Care</option>
                      <option value='Pathology and Laboratory Medicine'>Pathology and Laboratory Medicine</option>
                      <option value='Pharmacology'>Pharmacology</option>
                      <option value='Psychiatry'>Psychiatry</option>
                      <option value='Public Health'>Public Health</option>
                      <option value='Radiology'>Radiology</option>
                      <option value='Respiratory'>Respiratory</option>
                      <option value='Restorative Dentistry'>Restorative Dentistry</option>
                      <option value='Rheumatology'>Rheumatology</option>
                      <option value='Surgery'>Surgery</option>
                      <option value='Urology'>Urology</option>
                  </select>

              </div>
          </div>

          <button type="button" class="btn btn-success">Agregar</button>

          <ul class="list-group">
              <li class="list-group-item">An item</li>
              <li class="list-group-item">A second item</li>
              <li class="list-group-item">A third item</li>
              <li class="list-group-item">A fourth item</li>
              <li class="list-group-item">And a fifth one</li>
          </ul>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>







<script  type="text/javascript">
    
    $(document).ready(function() {

        //datatable
        $('#usuarios').DataTable({});

      
        //select usarios add
        $('.selectpicker').selectpicker({
            style: 'list-group'
        });


        $('.selectpicker').change(function () {
            var selected = []
            selected = $('.selectpicker').val()
            console.log(selected); //Get the multiple values selected in an array

            console.log(selected.length); //Length of the array

            alert(selected + '--' + selected.length);
        });


        


    });


    var botonAgregarJugador = document.getElementById('btnAgregarJugadores');
    

    botonAgregarJugador.addEventListener('click', function (e) {

        e.preventDefault();

        var req = new XMLHttpRequest();

        //console.log(window);

        

        req.open("POST", "/Grupos/ListUsuarios");


        req.onreadystatechange = function () {

            if (req.readyState === 4) {

                console.log(req.response);

                var selectorUsuarios = document.getElementById('selectorUsuarios');

                JSON.parse(req.response).forEach(function(e) {
                    
                    cargarSelect('<option value="asd">' + e.nombre + e.apellido + '-' + e.email + '</option>')
                    
                    

                })

                
            }

        }

        req.send();

    });

    function cargarSelect(string) {
        $(".selectpicker").append(string);
        $(".selectpicker").selectpicker("refresh");
    }


</script>

